---
# Default variables for gpu_baseline role
# Based on NVIDIA official ansible roles and community best practices

# GPU Auto-Detection
auto_detect_cuda_version: true  # Auto-detect GPU and select compatible CUDA version

# Driver Installation Method
driver_installation_method: "native"  # Options: native, driver-container, precompiled

# NVIDIA Driver Configuration
nvidia_driver_version: "535"  # Default version, auto-selected if auto_detect_cuda_version is true
nvidia_driver_ubuntu_install_from_cuda_repo: true
nvidia_driver_package_state: "present"
nvidia_driver_skip_reboot: false

# Driver Container Configuration (when driver_installation_method = driver-container)
driver_container_image: "nvcr.io/nvidia/driver"
driver_container_tag: "535.154.05-ubuntu22.04"
driver_container_enable_persistence: true

# CUDA Configuration
install_cuda: true
cuda_version: "12-2"  # Default CUDA version, auto-selected if auto_detect_cuda_version is true
cuda_package_state: "present"

# Container Runtime Configuration
install_container_runtime: true
container_runtime: "docker"  # Options: docker, containerd
nvidia_container_toolkit_package_state: "present"
docker_default_runtime: "nvidia"

# System Configuration
disable_nouveau: true
configure_grub: true
update_initramfs: true

# Reboot Configuration
reboot_timeout: 600
reboot_message: "Rebooting for NVIDIA driver installation"

# Validation
run_post_install_validation: true
validation_level: "quick"  # Options: quick, standard, full

# GPU Performance Settings
gpu_persistence_mode: true
gpu_power_limit: null  # Set to specific value in watts if needed

# Logging
log_directory: "/var/log/gpu_baseline"
